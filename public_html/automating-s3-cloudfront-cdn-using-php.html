<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Automating S3 + CloudFront CDN Using PHP | Designly</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes" />
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="/assets/css/style.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/base16/gigavolt.min.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <!-- We use the full link to the CSS file in the rest of the tags -->
        <link
            rel="preload"
            as="style"
            href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap"
        />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap"
            media="print"
            onload="this.media='all'"
        />
        <noscript>
            <link
                rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap"
            />
        </noscript>
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
        <link rel="manifest" href="/site.webmanifest" />
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000" />
        <meta name="msapplication-TileColor" content="#000000" />
        <meta name="theme-color" content="#ffffff" />
        <meta name="description" content="This article focuses on how to manage your AWS CloudFront distribution resources via the AWS PHP SDK." />
        <meta property="og:title" content="Automating S3 + CloudFront CDN Using PHP" />
        <meta property="og:description" content="This article focuses on how to manage your AWS CloudFront distribution resources via the AWS PHP SDK." />
        <meta property="og:image" content="https://cdn.designly.biz/imgr/blog_files/automating-s3-cloudfront-cdn-using-php/cover.jpg" />
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://blog.designly.biz/automating-s3-cloudfront-cdn-using-php" />
        <meta property="og:site_name" content="Designly Blog" />
        <meta property="fb:app_id" content="3419826058233420" />
    </head>
    <body>
        <main id="main" class="bg-zinc-50 dark:bg-zinc-900 min-h-screen pt-[90px] flex flex-col">
            <header
  class="py-2 bg-gradient-to-t from-blue-500 to-blue-700 dark:from-zinc-700 dark:to-zinc-900 shadow-lg fixed top-0 right-0 left-0 z-30"
>
  <nav class="flex justify-between items-center px-4">
    <a href="/" aria-label="Home Page">
      <img
        class="w-[150px] md:w-[175px]"
        src="/assets/svg/designly-logo-white.svg"
        alt="Designly"
        width="175"
        height="62"
      />
    </a>
    <h1 class="text-zinc-50 text-3xl hidden md:block">Developer Blog</h1>
    <div class="flex gap-8 items-center pr-2">
      <button class="btn-search-open" aria-label="Open Search Bar">
        <i class="fa-solid fa-search text-dark-colors text-3xl"></i>
      </button>
      <button class="btn-sidebar-open md:hidden" aria-label="Open Sidebar">
        <i class="fa-solid fa-bars text-dark-colors text-3xl"></i>
      </button>
    </div>
  </nav>
</header>
            <div id="content"><div class="grid grid-cols-1 md:grid-cols-4">
    <div class="col-span-3 px-4 md:px-20 py-10">
        <article class="flex flex-col gap-10 md:px-10">
            <section class="post-header flex flex-col gap-4">
                <h1 id="post-title" class="text-colors text-xl md:text-3xl font-bold">Automating S3 + CloudFront CDN Using PHP</h1>
                <div class="flex gap-2 items-center tag-list"><a href="/tag/php">#PHP</a>
<a href="/tag/aws">#AWS</a>
<a href="/tag/aws-cloudfront">#AWS CloudFront</a></div>
                <img
                    class="rounded-md shadow-lg"
                    src="https://cdn.designly.biz/imgr/blog_files/automating-s3-cloudfront-cdn-using-php/cover.jpg?w=1200&q=75"
                    srcset="https://cdn.designly.biz/imgr/blog_files/automating-s3-cloudfront-cdn-using-php/cover.jpg?w=640&q=75 640w, https://cdn.designly.biz/imgr/blog_files/automating-s3-cloudfront-cdn-using-php/cover.jpg?w=320&q=75 320w"
                    alt="Automating S3 + CloudFront CDN Using PHP"
                    width="1200"
                    height="675"
                />
                <script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8001907419576129"
    crossorigin="anonymous"
></script>
<ins
    class="adsbygoogle"
    style="display: block; text-align: center"
    data-ad-layout="in-article"
    data-ad-format="fluid"
    data-ad-client="ca-pub-8001907419576129"
    data-ad-slot="7647915952"
></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
            </section>
            <section class="post-content flex flex-col gap-6"><p>If you&rsquo;ve read my last article, <a href="https://designly.biz/blog/post/how-to-use-aws-cloudfront-to-create-your-own-free-cdn" rel="noreferrer noopener" target="_blank"><em>How to Use AWS CloudFront to Create Your Own Free CDN</em></a>, you hopefully have your own practically-free CDN for your website assets. But maintaining all of your assets manually via the <strong>aws cli</strong> tool can be cumbersome. In my last article, I showed you how to use the <strong>aws sync</strong> and <strong>aws cp</strong> commands to move files from your local drive to your S3 bucket, which is the back-end for your <strong>CloudFront CDN</strong>.</p>
<p>Now I&rsquo;m going to show you how to fully automate this process using PHP. Amazon Web Services has SDKs for several programming platforms, such as C++, Go, Java, JavaScript, .NET, NodeJS, PHP, Python and Ruby. This guide will largely focus on the <a href="https://github.com/aws/aws-sdk-php" rel="noreferrer noopener" target="_blank"><strong>PHP SDK</strong></a>.</p>
<p>Ok, enough babble, let&rsquo;s et started!</p>
<p>The first thing we need to do is install the SDK in the root directory of your webserver. If you are familiar with and already have <strong>composer</strong> packages installed on your webserver, then this should be pretty straight-forward. Since this article is not a guide on how to implement composer, I&rsquo;m going to assume you already have your bearings on it. If, not, please refer to the <a href="https://getcomposer.org/doc/01-basic-usage.md" rel="noreferrer noopener" target="_blank">Composer Website</a>.</p>
<h4>Install the AWS SDK for PHP via Composer</h4>
<p>In a BASH session on your webserver, navigate your your web root directory (wherever your composer.json file is located) and enter:</p>
<div class="code-wrapper shadow-lg"><pre><code class="language-ruby hljs ruby" data-lang="ruby">$ composer <span class="hljs-keyword">require</span> aws/aws-sdk-php-resources
</code></pre><span class="mac1"></span><span class="mac2"></span><span class="mac3"></span><button class="code-button" aria-label="Copy to clipboard"><i class="fa-solid fa-copy code-copy-icon"></i></button></div>
<p>This should install the latest version of the <strong>AWS-SDK-PHP</strong> in your <strong>vendor</strong> folder. And if you&rsquo;re already a composer user, you&rsquo;ll already have your <strong>autoload.php</strong> included in your project.</p>
<h4>Test Your Installation</h4>
<p>Now that it&rsquo;s installed, let&rsquo;s try a little test. First we need to create a configuration. You&rsquo;ll need your security credentials from the IAM user you created for your webserver. This includes your <strong>Access Key</strong> and <strong>Secret Key</strong>. Hopefully, you have your secret key saved in a secure location, as you cannot view it again from the IAM console. If you&rsquo;ve forgotten or lost it, you&rsquo;ll need to revoke your old keys and generate new ones.</p>
<p>One thing you want to avoid doing is hard-coding your credentials into your code. This is a security vulnerability and should be avoided, if possible. Instead, you can use a key provider service, environment variables or store them in your SQL database.</p>
<p>Here&rsquo;s an example of a basic AWS configuration in PHP:</p>
<div class="code-wrapper shadow-lg"><pre><code class="language-ocaml hljs ocaml" data-lang="ocaml">$config = [
      <span class="hljs-symbol">'version'</span> =&gt; <span class="hljs-symbol">'latest'</span>,
      <span class="hljs-symbol">'region'</span> =&gt; <span class="hljs-symbol">'us</span>-east-<span class="hljs-number">1</span>,
      <span class="hljs-symbol">'credentials'</span> =&gt; [
         <span class="hljs-symbol">'key'</span> =&gt; <span class="hljs-symbol">'YOUR_AWS_ACCESS_KEY'</span>,
         <span class="hljs-symbol">'secret'</span> =&gt; <span class="hljs-symbol">'YOUR_AWS_SECREY_KEY'</span>
   ]
];
</code></pre><span class="mac1"></span><span class="mac2"></span><span class="mac3"></span><button class="code-button" aria-label="Copy to clipboard"><i class="fa-solid fa-copy code-copy-icon"></i></button></div>
<p>Again, do not hard-code your credentials here. Personally, I pull them from a MySQL database and assign them to a variable, but there are plenty of other methods to store them.</p>
<p>Ok, let&rsquo;s get right into it. We&rsquo;ll start of with something simple. Let&rsquo;s include the AWS S3 class and list all of the S3 buckets on our account:</p>
<div class="code-wrapper shadow-lg"><pre><code class="language-xml hljs xml" data-lang="xml"><span class="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">require</span> <span class="hljs-string">'vendor/autoload.php'</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Aws</span>\<span class="hljs-title">S3</span>\<span class="hljs-title">S3Client</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Aws</span>\<span class="hljs-title">Exception</span>\<span class="hljs-title">AwsException</span>;
<span class="hljs-keyword">try</span> {
   $s3 = <span class="hljs-keyword">new</span> S3Client($config);
   $buckets = $s3-&gt;listBuckets();
   <span class="hljs-keyword">foreach</span> ($buckets <span class="hljs-keyword">as</span> $bucket) {
      <span class="hljs-keyword">echo</span> $bucket[<span class="hljs-string">'Name'</span>].<span class="hljs-string">"\n"</span>;
   }
}
<span class="hljs-keyword">catch</span> (S3Exception $e)
{
   <span class="hljs-keyword">echo</span> $e-&gt;getMessage();
}
<span class="hljs-meta">?&gt;</span></span>
</code></pre><span class="mac1"></span><span class="mac2"></span><span class="mac3"></span><button class="code-button" aria-label="Copy to clipboard"><i class="fa-solid fa-copy code-copy-icon"></i></button></div>
<p>Ok, that&rsquo;s pretty basic, but hopefully your code printed out a list of your S3 buckets. Ideally, you&rsquo;ll already know which bucket you want to upload your files to, so let continue with uploading objects to your preferred S3 bucket.</p>
<p>But first, I&rsquo;d like to elaborate on how AWS&rsquo;s <strong>Simple Storage Service (S3)</strong> works. Amazon S3 calls &ldquo;files&rdquo; stored in your bucket <strong>objects</strong>. This concept can take some getting used to. If you&rsquo;re familiar with <strong>Object-oriented Programming</strong> , then you know that objects are a collection of properties and methods to manipulate data. Well, S3 works in a very similar capacity. So when you want to refer to a &ldquo;file&rdquo; or &ldquo;S3 Object,&rdquo; you&rsquo;ll refer to it&rsquo;s <strong>key</strong> , just as you would programmatically with an object. That being said, instead of <strong>file path</strong> , AWS S3 calls it a <strong>key</strong>. The key is a relative path to your S3 bucket&rsquo;s root, without the preceding slash.</p>
<h4>Upload an S3 Object</h4>
<p>Ok, let&rsquo;s upload an image file to our S3 bucket:</p>
<div class="code-wrapper shadow-lg"><pre><code class="language-xml hljs xml" data-lang="xml"><span class="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">require</span> <span class="hljs-string">'vendor/autoload.php'</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Aws</span>\<span class="hljs-title">S3</span>\<span class="hljs-title">S3Client</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Aws</span>\<span class="hljs-title">Exception</span>\<span class="hljs-title">AwsException</span>;
<span class="hljs-keyword">try</span> {
   $s3 = <span class="hljs-keyword">new</span> S3Client($config);
   $fileData = file_get_contents(<span class="hljs-string">"/path/to/your/image.jpg"</span>);
   $mimeType = mime_content_type(<span class="hljs-string">"/path/to/your/image.jpg"</span>);
   $s3-&gt;putObject([
      <span class="hljs-string">'Key'</span> =&gt; <span class="hljs-string">'images/image.jpg'</span>,
      <span class="hljs-string">'Body'</span> =&gt; $fileData,
      <span class="hljs-string">'ContentType'</span> =&gt; $mimeType
   ]);
}
<span class="hljs-keyword">catch</span> (S3Exception $e)
{
   <span class="hljs-keyword">echo</span> $e-&gt;getMessage();
}
<span class="hljs-meta">?&gt;</span></span>
</code></pre><span class="mac1"></span><span class="mac2"></span><span class="mac3"></span><button class="code-button" aria-label="Copy to clipboard"><i class="fa-solid fa-copy code-copy-icon"></i></button></div>
<p>Now you should be able to access your object via your <strong>CloudFront Distribution Domain Name</strong>. If you&rsquo;re unsure about this, please refer to my <a href="https://designly.biz/blog/post/how-to-use-aws-cloudfront-to-create-your-own-free-cdn" rel="noreferrer noopener" target="_blank">previous article</a>. Your full URL path will look something like this:</p>
<div class="code-wrapper shadow-lg"><pre><code class="language-dts hljs dts" data-lang="dts"><span class="hljs-symbol">https:</span><span class="hljs-comment">//sdf934r3iruihi3u4h.cloudfront.net/images/image.jpg</span>
</code></pre><span class="mac1"></span><span class="mac2"></span><span class="mac3"></span><button class="code-button" aria-label="Copy to clipboard"><i class="fa-solid fa-copy code-copy-icon"></i></button></div>
<h4>Invalidate Object from the CloudFront Cache</h4>
<p>Files stored in your S3 bucket are automatically cached on the CloudFront edge server&rsquo;s cache. Unless you want to wait for the TTL (time to live) to expire, you may want to <strong>invalidate</strong> newly-uploaded objects to get the latest version in your browser. Here&rsquo;s how to do it in the PHP-SDK:</p>
<div class="code-wrapper shadow-lg"><pre><code class="language-php hljs php" data-lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Aws</span>\<span class="hljs-title">CloudFront</span>\<span class="hljs-title">CloudFrontClient</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Aws</span>\<span class="hljs-title">Exception</span>\<span class="hljs-title">AwsException</span>;
<span class="hljs-keyword">try</span> {
   $cf = <span class="hljs-keyword">new</span> CloudFrontClient($config);
   $cf-&gt;createInvalidation([
      <span class="hljs-string">'DistributionId'</span> =&gt; <span class="hljs-string">"YOUR_CLOUDFRONT_DISTID',
      'InvalidationBatch' =&gt; [
         'CallerReference' =&gt; "</span>UNIQUE_CALLER_IDENTIFIER<span class="hljs-string">',
         '</span>Paths<span class="hljs-string">' =&gt; [
            '</span>Items<span class="hljs-string">' =&gt; [
               '</span>images/images.jpg<span class="hljs-string">'
             ],
            '</span>Quantity<span class="hljs-string">' =&gt; 1
         ]
      ]
   ]);
}
catch (AwsException $e)
{
   echo $e-&gt;getAwsErrorMessage();
}
?&gt;
</span></code></pre><span class="mac1"></span><span class="mac2"></span><span class="mac3"></span><button class="code-button" aria-label="Copy to clipboard"><i class="fa-solid fa-copy code-copy-icon"></i></button></div>
<p>This code will invalidate the cached version of image.jpg and pull the current version from your S3 bucket. The <strong>CallerReference</strong> property is a unique identifier you need to come up with to identify the source of the request. This is mainly used for logging purposes.</p>
<h4>Advanced Example: Concatenating and Minifying JavaScript Code</h4>
<p>Ok, let&rsquo;s get serious. In this example, I&rsquo;ll show you how to automate concatenating your JavaScript code, minifying it, and then uploading it to your CDN.</p>
<p>You&rsquo;ll first need to install Mathias Mullie&rsquo;s <a href="https://github.com/matthiasmullie/minify" rel="noreferrer noopener" target="_blank"><strong>Minify</strong></a> library:</p>
<div class="code-wrapper shadow-lg"><pre><code class="language-ruby hljs ruby" data-lang="ruby">$ composer <span class="hljs-keyword">require</span> matthiasmullie/minify
</code></pre><span class="mac1"></span><span class="mac2"></span><span class="mac3"></span><button class="code-button" aria-label="Copy to clipboard"><i class="fa-solid fa-copy code-copy-icon"></i></button></div>
<p>And here&rsquo;s the code:</p>
<div class="code-wrapper shadow-lg"><pre><code class="language-php hljs php" data-lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">MatthiasMullie</span>\<span class="hljs-title">Minify</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Aws</span>\<span class="hljs-title">Resource</span>\<span class="hljs-title">Aws</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Aws</span>\<span class="hljs-title">CloudFront</span>\<span class="hljs-title">CloudFrontClient</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Aws</span>\<span class="hljs-title">S3</span>\<span class="hljs-title">S3Client</span>;
<span class="hljs-comment">// Instantiate the Minify/JS class</span>
$m = <span class="hljs-keyword">new</span> Minify\JS;
<span class="hljs-comment">// Iterate through our array of JavaScript files and concatenate them</span>
<span class="hljs-keyword">foreach</span> ($jsFiles <span class="hljs-keyword">as</span> $file)
{
   $m-&gt;add($file);
}
<span class="hljs-comment">// Minify the code</span>
$out = $m-&gt;minify();
<span class="hljs-comment">// Upload the minified code to our S3 bucket</span>
<span class="hljs-keyword">try</span> {
   $s3 = <span class="hljs-keyword">new</span> S3Client($config);
   $s3-&gt;putObject([
      <span class="hljs-string">'Key'</span> =&gt; <span class="hljs-string">'js/main.min.js'</span>,
      <span class="hljs-string">'Body'</span> =&gt; $out,
      <span class="hljs-string">'ContentType'</span> =&gt; <span class="hljs-string">'text/javascript'</span>
   ]);
}
<span class="hljs-keyword">catch</span> (S3Exception $e)
{
   <span class="hljs-keyword">echo</span> $e-&gt;getMessage();
}
<span class="hljs-comment">// Invalidate the existing file</span>
<span class="hljs-keyword">try</span> {
   $cf = <span class="hljs-keyword">new</span> CloudFrontClient($config);
   $cf-&gt;createInvalidation([
      <span class="hljs-string">'DistributionId'</span> =&gt; <span class="hljs-string">"YOUR_CLOUDFRONT_DISTID',
      'InvalidationBatch' =&gt; [
         'CallerReference' =&gt; "</span>UNIQUE_CALLER_IDENTIFIER<span class="hljs-string">',
         '</span>Paths<span class="hljs-string">' =&gt; [
            '</span>Items<span class="hljs-string">' =&gt; [
               '</span>js/main.min.js<span class="hljs-string">'
             ],
            '</span>Quantity<span class="hljs-string">' =&gt; 1
         ]
      ]
   ]);
}
catch (AwsException $e)
{
   echo $e-&gt;getAwsErrorMessage();
}
</span></code></pre><span class="mac1"></span><span class="mac2"></span><span class="mac3"></span><button class="code-button" aria-label="Copy to clipboard"><i class="fa-solid fa-copy code-copy-icon"></i></button></div>
<p>As you can see, this setup can be very powerful for speeding up your web design process by automating things that would normally take a lot of time to do manually. You can use this same code to concatenate and upload CSS as well. Just call Minify/CSS instead of Minify/JS.</p>
<p>I hope you found this guide useful! For more great information, please visit our <a href="https://designly.biz/blog" rel="noreferrer noopener" target="_blank">Blog</a>.</p>
<p>See also: <a href="https://designly.biz/blog/post/how-to-use-aws-cloudfront-to-create-your-own-free-cdn" rel="noreferrer noopener" target="_blank">How to Use AWS CloudFront to Create Your Own Free CDN</a>.</p>
<hr>
</section>
            <script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8001907419576129"
    crossorigin="anonymous"
></script>
<ins
    class="adsbygoogle"
    style="display: block; text-align: center"
    data-ad-layout="in-article"
    data-ad-format="fluid"
    data-ad-client="ca-pub-8001907419576129"
    data-ad-slot="7647915952"
></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
            <div class="share-buttons text-2xl flex gap-4 mx-auto">
                <h2 class="text-2xl font-bold text-colors">Please Share!</h2>
                <a
                    href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fblog.designly.biz%2Fautomating-s3-cloudfront-cdn-using-php"
                    target="_blank"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook text-blue-700"></i>
                </a>
                <a
                    href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fblog.designly.biz%2Fautomating-s3-cloudfront-cdn-using-php"
                    target="_blank"
                    aria-label="Share on LinkedIn"
                >
                    <i class="fab fa-linkedin text-indigo-700"></i>
                </a>
                <a href="https://twitter.com/share?url=https%3A%2F%2Fblog.designly.biz%2Fautomating-s3-cloudfront-cdn-using-php" target="_blank">
                    <i class="fab fa-twitter text-sky-700"></i>
                </a>
            </div>
            <hr />
            <div class="bg-white dark:bg-zinc-800 border-1 rounded-lg flex flex-col shadow p-6 max-w-xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-y-4">
                    <div class="col-span-1 flex items-center">
                        <img
                            src="https://cdn.designly.biz/imgr/jay.jpg?w=200&q=75"
                            alt="Jay"
                            width="200"
                            height="200"
                            class="rounded-full shadow-md border-4 border-blue-700/20 w-32 h-32 mx-auto"
                        />
                    </div>
                    <div class="col-span-3 px-6 flex flex-col gap-4">
                        <h3 class="text-2xl font-semibold text-center text-colors">About The Author</h3>
                        <p class="text-zinc-700 dark:text-zinc-300">
                            Jay is a full-stack developer, electrical engineer, writer and music producer. He currently
                            resides in the Madison, WI area.
                        </p>
                        <a
                            href="https://jay.designly.biz"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="text-hover flex gap-2 items-center"
                        >
                            <div>Portfolio Site</div>
                            <i class="fa-solid fa-external-link"></i>
                        </a>
                    </div>
                </div>
            </div>
            <hr />
            <h2 class="text-2xl font-bold text-center border-b-2 border-dashed pb-1 text-colors">Comments</h2>
            <div id="comments" class="text-colors">
                <!-- Comments will be generated here -->
                <p>No Comments Yet</p>
            </div>
            <button id="btn-post-comment" class="btn btn-primary btn-outline flex gap-2 items-center max-w-md mx-auto">
                <i class="fas fa-comment-medical"></i>
                <div>Post Comment</div>
            </button>
            <script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8001907419576129"
    crossorigin="anonymous"
></script>
<ins
    class="adsbygoogle"
    style="display: block; text-align: center"
    data-ad-layout="in-article"
    data-ad-format="fluid"
    data-ad-client="ca-pub-8001907419576129"
    data-ad-slot="7647915952"
></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
            <template id="comment-template" class="text-colors">
                <div
                    class="comment flex flex-col gap-4 p-4 border rounded shadow mb-4 bg-white dark:bg-zinc-800 text-colors"
                >
                    <div class="flex gap-2 items-center">
                        <img
                            class="comment-avatar rounded-full w-10 h-10"
                            src="/assets/img/pixel-black.png"
                            width="100"
                            height="100"
                            alt="Commenter Avatar"
                        />
                        <div class="comment-display-name text-2xl text-cyan-700"></div>
                    </div>
                    <p class="comment-text"></p>
                    <div class="replies ml-4">
                        <!-- Replies will be generated here -->
                    </div>
                    <button class="reply-button mt-2 text-hover flex gap-2 items-center">
                        <i class="fas fa-comment-dots"></i>
                        <div>Reply</div>
                    </button>
                </div>
            </template>
        </article>
    </div>
    <div class="sidebar">
    <button class="btn top-4 left-4 btn-sidebar-close flex md:hidden btn-sidebar-close z-40 shadow-xl"
        aria-label="Close sidebar">
        <i class="fa-solid fa-times text-2xl"></i>
    </button>
    <div id="post-sidebar-cont" class="flex flex-col gap-8">
        <a href="/making-typescript-more-flexible-generics-and-discriminated-unions">
    <div class="flex flex-col rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 shadow-md min-h-[400px]">
        <div class="relative overflow-hidden h-[250px]">
            <img class="w-full object-cover" src="https://cdn.designly.biz/imgr/blog_files/making-typescript-more-flexible-generics-and-discriminated-unions/cover.jpg?w=400&q=75" alt="Making Typescript More Flexible: Generics and Discriminated Unions" loading="lazy" />
        </div>
        <div class="p-4 flex flex-col gap-2">
            <h1 class="text-xl font-bold">Making Typescript More Flexible: Generics and Discriminated Unions</h1>
            <p class="text-zinc-600 text-lg md:text-sm">Master TypeScript's key features—Generics, Discriminated Unions, and Type Guards—with hands-on examples. Boost your code's type safety and flexibility.</p>
        </div>
    </div>
</a>
<a href="/how-to-get-a-unix-like-terminal-environment-in-windows-and-visual-studio">
    <div class="flex flex-col rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 shadow-md min-h-[400px]">
        <div class="relative overflow-hidden h-[250px]">
            <img class="w-full object-cover" src="https://cdn.designly.biz/imgr/blog_files/how-to-get-a-unix-like-terminal-environment-in-windows-and-visual-studio/cover.jpg?w=400&q=75" alt="How to Get a Unix-Like Terminal Environment in Windows and Visual Studio Code" loading="lazy" />
        </div>
        <div class="p-4 flex flex-col gap-2">
            <h1 class="text-xl font-bold">How to Get a Unix-Like Terminal Environment in Windows and Visual Studio Code</h1>
            <p class="text-zinc-600 text-lg md:text-sm">In this article, I'll show you how to integrate Cmder as your default terminal in Visual Studio Code to give you a Unix-like environment.</p>
        </div>
    </div>
</a>
<a href="/implementing-nprogress-in-the-next-js-13-app-router">
    <div class="flex flex-col rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 shadow-md min-h-[400px]">
        <div class="relative overflow-hidden h-[250px]">
            <img class="w-full object-cover" src="https://cdn.designly.biz/imgr/blog_files/implementing-nprogress-in-the-next-js-13-app-router/cover.jpg?w=400&q=75" alt="Implementing NProgress in the Next.js 13 App Router" loading="lazy" />
        </div>
        <div class="p-4 flex flex-col gap-2">
            <h1 class="text-xl font-bold">Implementing NProgress in the Next.js 13 App Router</h1>
            <p class="text-zinc-600 text-lg md:text-sm">In this article, I'll show you how to implement the popular NProgress NPM package in the Next.js 13 App router.</p>
        </div>
    </div>
</a>
<script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8001907419576129"
    crossorigin="anonymous"
></script>
<ins
    class="adsbygoogle"
    style="display: block"
    data-ad-format="fluid"
    data-ad-layout-key="+13+qh+1q+m+1y"
    data-ad-client="ca-pub-8001907419576129"
    data-ad-slot="2598499752"
></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<a href="/create-an-emoji-selector-for-next-js-forms-using-tailwind-daisyui">
    <div class="flex flex-col rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 shadow-md min-h-[400px]">
        <div class="relative overflow-hidden h-[250px]">
            <img class="w-full object-cover" src="https://cdn.designly.biz/imgr/blog_files/create-an-emoji-selector-for-next-js-forms-using-tailwind-daisyui/cover.jpg?w=400&q=75" alt="Create an Emoji Selector for Next.js Forms using Tailwind + DaisyUI" loading="lazy" />
        </div>
        <div class="p-4 flex flex-col gap-2">
            <h1 class="text-xl font-bold">Create an Emoji Selector for Next.js Forms using Tailwind + DaisyUI</h1>
            <p class="text-zinc-600 text-lg md:text-sm">In this blog post, we're diving deep into the cosmos of code to guide you on creating an emoji selector for your Next.js forms that's both functional and fabulous.</p>
        </div>
    </div>
</a>
<a href="/implementing-a-loading-overlay-with-next-router-events-in-next-js">
    <div class="flex flex-col rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 shadow-md min-h-[400px]">
        <div class="relative overflow-hidden h-[250px]">
            <img class="w-full object-cover" src="https://cdn.designly.biz/imgr/blog_files/implementing-a-loading-overlay-with-next-router-events-in-next-js/cover.jpg?w=400&q=75" alt="Implementing a Loading Overlay with next/router Events in Next.js" loading="lazy" />
        </div>
        <div class="p-4 flex flex-col gap-2">
            <h1 class="text-xl font-bold">Implementing a Loading Overlay with next/router Events in Next.js</h1>
            <p class="text-zinc-600 text-lg md:text-sm">Build a route change loading overlay using `next/router` events.</p>
        </div>
    </div>
</a>
<a href="/building-an-ai-search-app-with-next-js-and-openai-a-step-by-step-guide">
    <div class="flex flex-col rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 shadow-md min-h-[400px]">
        <div class="relative overflow-hidden h-[250px]">
            <img class="w-full object-cover" src="https://cdn.designly.biz/imgr/blog_files/building-an-ai-search-app-with-next-js-and-openai-a-step-by-step-guide/cover.jpg?w=400&q=75" alt="Building an AI Search App with Next.js and OpenAI: A Step-by-step Guide" loading="lazy" />
        </div>
        <div class="p-4 flex flex-col gap-2">
            <h1 class="text-xl font-bold">Building an AI Search App with Next.js and OpenAI: A Step-by-step Guide</h1>
            <p class="text-zinc-600 text-lg md:text-sm">Today, we're taking a deep dive into the realm of AI-driven searches, using a powerful tech stack comprising Next.js, Sequelize, PostgreSQL, pgvector, and the OpenAI API.</p>
        </div>
    </div>
</a>
<script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8001907419576129"
    crossorigin="anonymous"
></script>
<ins
    class="adsbygoogle"
    style="display: block"
    data-ad-format="fluid"
    data-ad-layout-key="+13+qh+1q+m+1y"
    data-ad-client="ca-pub-8001907419576129"
    data-ad-slot="2598499752"
></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<a href="/github-copilot-vs-codewhisperer-the-verdict">
    <div class="flex flex-col rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 shadow-md min-h-[400px]">
        <div class="relative overflow-hidden h-[250px]">
            <img class="w-full object-cover" src="https://cdn.designly.biz/imgr/blog_files/github-copilot-vs-codewhisperer-the-verdict/cover.jpg?w=400&q=75" alt="GitHub Copilot vs CodeWhisperer: The Verdict" loading="lazy" />
        </div>
        <div class="p-4 flex flex-col gap-2">
            <h1 class="text-xl font-bold">GitHub Copilot vs CodeWhisperer: The Verdict</h1>
            <p class="text-zinc-600 text-lg md:text-sm">In this blog post, I'll take you through my journey, share my insights, and finally, reveal the winner in the showdown between GitHub Copilot and AWS CodeWhisperer.</p>
        </div>
    </div>
</a>
<a href="/creating-an-install-to-home-screen-prompt-in-a-next-js-progressive-web-app">
    <div class="flex flex-col rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 shadow-md min-h-[400px]">
        <div class="relative overflow-hidden h-[250px]">
            <img class="w-full object-cover" src="https://cdn.designly.biz/imgr/blog_files/creating-an-install-to-home-screen-prompt-in-a-next-js-progressive-web-app/cover.jpg?w=400&q=75" alt="Creating an "Install to Home Screen" Prompt in a Next.js Progressive Web App" loading="lazy" />
        </div>
        <div class="p-4 flex flex-col gap-2">
            <h1 class="text-xl font-bold">Creating an "Install to Home Screen" Prompt in a Next.js Progressive Web App</h1>
            <p class="text-zinc-600 text-lg md:text-sm">Step-by-step guide to creating an 'Add to Home Screen' prompt for Next.js PWAs, targeting major mobile browsers to enhance user experience.</p>
        </div>
    </div>
</a>
<a href="/create-an-attractive-file-upload-widget-with-react-nextjs-and-tailwind-css">
    <div class="flex flex-col rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800 shadow-md min-h-[400px]">
        <div class="relative overflow-hidden h-[250px]">
            <img class="w-full object-cover" src="https://cdn.designly.biz/imgr/blog_files/create-an-attractive-file-upload-widget-with-react-nextjs-and-tailwind-css/cover.jpg?w=400&q=75" alt="How to Create an Attractive File Upload Widget With React/Next.js and Tailwind CSS" loading="lazy" />
        </div>
        <div class="p-4 flex flex-col gap-2">
            <h1 class="text-xl font-bold">How to Create an Attractive File Upload Widget With React/Next.js and Tailwind CSS</h1>
            <p class="text-zinc-600 text-lg md:text-sm">By leveraging the strengths of React, Tailwind CSS, and Daisy UI, we can create a user-friendly and aesthetically pleasing file uploader.</p>
        </div>
    </div>
</a>
<script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8001907419576129"
    crossorigin="anonymous"
></script>
<ins
    class="adsbygoogle"
    style="display: block"
    data-ad-format="fluid"
    data-ad-layout-key="+13+qh+1q+m+1y"
    data-ad-client="ca-pub-8001907419576129"
    data-ad-slot="2598499752"
></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
    </div>
    <div id="post-list-bottom"></div>
</div>
</div>
<input id="post-id" type="hidden" value="6vGkpJh7iCOUa7mktP5l4q" />
<input id="reply-to" type="hidden" value="" />
<input id="post-url" type="hidden" value="https://blog.designly.biz/automating-s3-cloudfront-cdn-using-php" />
<script>
    function generateComment(commentData) {
        const template = document.querySelector("#comment-template");
        const clone = template.content.cloneNode(true);
        const displayName = clone.querySelector(".comment-display-name");
        displayName.textContent = commentData.displayName;
        const commentAvatar = clone.querySelector(".comment-avatar");
        commentAvatar.setAttribute("src", commentData.avatar);
        const commentText = clone.querySelector(".comment-text");
        commentText.textContent = commentData.comment;
        const repliesContainer = clone.querySelector(".replies");
        commentData.replies.forEach((reply) => {
            const replyElement = generateComment(reply);
            repliesContainer.appendChild(replyElement);
        });
        const replyButton = clone.querySelector(".reply-button");
        replyButton.addEventListener("click", () => {
            document.getElementById("reply-to").value = commentData._id;
            loadUrl("/comment");
        });
        return clone;
    }
    const fetchComments = async () => {
        const postId = document.getElementById("post-id").value;
        try {
            const result = await fetch(`https://blog-comments.designly.workers.dev/?postId=${postId}`);
            const comments = await result.json();
            const commentsContainer = document.querySelector("#comments");
            if (Array.isArray(comments) && comments.length) {
                commentsContainer.innerHTML = "";
                comments.forEach((comment) => {
                    const commentElement = generateComment(comment);
                    commentsContainer.appendChild(commentElement);
                });
            }
        } catch (err) {
            console.error(err);
        }
    };
    setTimeout(async () => {
        fetchComments();
        document.getElementById("btn-post-comment").addEventListener("click", () => {
            loadUrl(`/comment`);
        });
    }, 0);
</script>
</div>
            <footer class="flex justify-around items-center py-2 bg-gradient-to-b from-blue-500 to-blue-700 text-white dark:from-zinc-500 dark:to-zinc-700 mt-auto">
    <div>&copy; 2008 - 2023 Designly</div>
</footer>
        </main>
        <div id="image-viewer" class="fixed top-0 right-0 bottom-0 left-0 z-50 hidden bg-zinc-900">
            <button class="fixed top-4 left-4 btn-close-image-viewer">
                <i class="fa-solid fa-times text-xl text-hover text-white"></i>
            </button>
            <img
                id="image-viewer-img"
                class="m-auto w-full btn-close-image-viewer cursor-zoom-out"
                alt="Full Size Image"
                src="/assets/img/pixel-black.png"
                width="1920"
                height="1080"
            />
        </div>
        <div
            id="loading"
            class="fixed top-0 right-0 bottom-0 left-0 bg-black/80 flex justify-around items-center z-50"
            style="display: none"
        >
            <div class="flex flex-col gap-4">
                <img src="/assets/svg/notes-light.svg" alt="Bouncy Notes" width="200" height="200" />
                <h1 class="text-zinc-100 text-2xl text-center font-semibold animate-pulse">Loading...</h1>
            </div>
        </div>
        <div
            id="layer"
            class="fixed top-0 right-0 bottom-0 left-0 flex flex-col m-auto w-full bg-zinc-50 dark:bg-zinc-900 z-30 overflow-x-auto"
            style="display: none"
        ></div>
        <script>
    function loadLayer(html) {
        const layer = document.getElementById("layer");
        const parser = new DOMParser();
        const parsed = parser.parseFromString(html, "text/html");
        layer.innerHTML = parsed.body.innerHTML;
        const scripts = parsed.body.querySelectorAll("script");
        for (let i = 0; i < scripts.length; i++) {
            const script = document.createElement("script");
            for (let key in scripts[i].attributes) {
                script.setAttribute(key, scripts[i].attributes[key].value);
            }
            script.innerHTML = scripts[i].innerHTML;
            layer.appendChild(script);
        }
        layer.style.display = "flex";
    }
    function loadUrl(url) {
        loadingOn();
        fetch(url)
            .then((res) => res.text())
            .then((data) => {
                loadLayer(data);
            })
            .catch((err) => {
                console.error(err);
            })
            .finally(() => {
                loadingOff();
            });
    }
    function hideLayer() {
        const layer = document.getElementById("layer");
        layer.style.display = "none";
    }
    function loadingOn() {
        const loading = document.getElementById("loading");
        loading.style.display = "flex";
    }
    function loadingOff() {
        const loading = document.getElementById("loading");
        loading.style.display = "none";
    }
</script>
        <script src="/assets/js/index.js" defer></script>
        <script src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit"></script>
    </body>
</html>